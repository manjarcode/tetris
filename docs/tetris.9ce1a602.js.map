{"mappings":"C,A,W,S,E,C,E,G,E,E,C,E,C,E,E,E,C,E,G,C,M,A,O,C,M,E,C,I,E,A,C,G,E,K,A,E,K,C,oE,I,E,O,E,E,E,C,C,E,A,C,O,I,I,E,E,G,Q,E,C,I,E,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,K,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,E,Q,C,O,M,C,E,C,G,C,ECA8B,CAAC,QAAQ,kCAAkC,MAAQ,kCAAkC,MAAQ,kCAAkC,MAAQ,kCAAkC,MAAQ,sCAAsC,MAAQ,sCAAsC,QAAQ,sCAAsC,GEW1U,IAKM,EAAS,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAU,CACtF,EAAU,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAU,AEfrF,OAAA,EACb,YAAY,CAAC,CAAE,CAAC,CAAE,CAAK,CAAE,CAAM,CAAE,CAAQ,CAAE,CACzC,IAAI,CAAC,CAAC,CAAG,EACT,IAAI,CAAC,CAAC,CAAG,EACT,IAAI,CAAC,KAAK,CAAG,EACb,IAAI,CAAC,MAAM,CAAG,EACd,IAAI,CAAC,QAAQ,CAAG,CAClB,CAEA,aAAc,CACZ,OAAO,IAAI,EAAO,IAAI,CAAC,CAAC,CAAE,IAAI,CAAC,CAAC,CAClC,CAEA,UAAW,CACT,OAAO,IAAI,CAAC,KAAK,AACnB,CAEA,aAAa,CAAW,CAAE,CAKxB,OAAO,AADM,IAAI,EAHH,IAAI,CAAC,CAAC,CAAG,EAAY,CAAC,CACtB,IAAI,CAAC,CAAC,CAAG,EAAY,CAAC,CAEC,IAAI,CAAC,KAAK,CAAE,IAAI,CAAC,MAAM,CAAE,IAAI,CAAC,QAAQ,EAC/D,OAAO,EACrB,CAEA,UAAU,CAAW,CAAE,CACrB,IAAI,CAAC,CAAC,CAAG,IAAI,CAAC,CAAC,CAAG,EAAY,CAAC,CAC/B,IAAI,CA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","sources":["<anon>","node_modules/@parcel/runtime-js/lib/runtime-a8842513fe0a4f56.js","src/game.js","src/constants.js","src/tetris.js","src/block.js","src/pieceBuilder.js","src/utils.js","src/rotateTable.js","src/piece360.js","src/piece.js","src/piece180.js","node_modules/@parcel/runtime-js/lib/runtime-9b64a3756bdf6f9a.js","node_modules/@parcel/runtime-js/lib/runtime-d2e75736e1d322a1.js","node_modules/@parcel/runtime-js/lib/runtime-4b107667a30182d3.js","node_modules/@parcel/runtime-js/lib/runtime-4afd189261cbe030.js","node_modules/@parcel/runtime-js/lib/runtime-136dbe6f39eade28.js","node_modules/@parcel/runtime-js/lib/runtime-05b3aa9b20c7fcb9.js","node_modules/@parcel/runtime-js/lib/runtime-489f90e24e69d95f.js","src/matrix.js","src/screen.js","src/drawer.js"],"sourcesContent":["(function () {\n\nfunction $parcel$extendImportMap(map) {\n  Object.assign(parcelRequire.i ??= {}, map);\n}\n\nvar $parcel$bundleURL;\nfunction $parcel$resolve(url) {\n  url = parcelRequire.i?.[url] || url;\n  if (!$parcel$bundleURL) {\n    try {\n      throw new Error();\n    } catch (err) {\n      var matches = ('' + err.stack).match(\n        /(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g,\n      );\n      if (matches) {\n        $parcel$bundleURL = matches[0];\n      } else {\n        return $parcel$distDir + url;\n      }\n    }\n  }\n  return new URL($parcel$distDir + url, $parcel$bundleURL).toString();\n}\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  var $parcel$distDir = \"./\";\n\nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire685b\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire685b\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nvar $2ed1d47590b2a3cb$exports = {};\n$parcel$extendImportMap({\n    \"8mJIW\": \"s.8adb7d0e.png\",\n    \"auyvD\": \"t.1a22270f.png\",\n    \"jQriX\": \"l.66e5de53.png\",\n    \"hotXP\": \"z.5c6e7042.png\",\n    \"hic7r\": \"stick.29508506.png\",\n    \"kehWT\": \"seven.a36daa0f.png\",\n    \"1KxUL\": \"square.02a09eec.png\"\n});\n\nconst $826109a56306c1ec$export$b2e3d6d444266a5c = 40;\nconst $826109a56306c1ec$export$9ecce7f637e2cef2 = 20;\nconst $826109a56306c1ec$export$6e1c5706acfd8e4a = 10;\nconst $826109a56306c1ec$export$8a35421d63461a85 = 10;\nconst $826109a56306c1ec$export$cc060c12b7723909 = 20;\nconst $826109a56306c1ec$export$6c844c64a5efe1ee = 0;\nconst $826109a56306c1ec$export$a1dcec72f4af3b71 = 0;\nconst $826109a56306c1ec$export$c50f500af9a45ebe = $826109a56306c1ec$export$6e1c5706acfd8e4a;\nconst $826109a56306c1ec$export$e08d11f3e69a4ce1 = 0;\nconst $826109a56306c1ec$export$fe84d70d943d614 = $826109a56306c1ec$export$9ecce7f637e2cef2;\nconst $826109a56306c1ec$export$c21b640bfee1f50e = 0;\nconst $826109a56306c1ec$export$346f08c1f0d0fe41 = {\n    NONE: 0,\n    LEFT: 1,\n    RIGHT: 2\n};\nconst $826109a56306c1ec$export$8f45430ccf837300 = [\n    \"#FF6B6B\",\n    \"#FF9F1C\",\n    \"#FFD23F\",\n    \"#17C3B2\",\n    \"#227C9D\",\n    \"#8B5CF6\",\n    \"#E6E6EA\"\n];\nconst $826109a56306c1ec$export$5a5da632d18030b0 = [\n    \"#C34C4C\",\n    \"#B36D14\",\n    \"#B8962E\",\n    \"#0F8175\",\n    \"#165166\",\n    \"#5A3EAB\",\n    \"#A1A1A5\"\n];\n\n\n\nclass $71381c9973ee9809$export$2e2bcd8739ae039 {\n    constructor(x, y, color, matrix, snapshot){\n        this.x = x;\n        this.y = y;\n        this.color = color;\n        this.matrix = matrix;\n        this.snapshot = snapshot;\n    }\n    getPosition() {\n        return new $71381c9973ee9809$export$9b781de7bf37bf48(this.x, this.y);\n    }\n    getColor() {\n        return this.color;\n    }\n    canTranslate(translation) {\n        const nextX = this.x + translation.x;\n        const nextY = this.y + translation.y;\n        const next = new $71381c9973ee9809$export$2e2bcd8739ae039(nextX, nextY, this.color, this.matrix, this.snapshot);\n        return next.isValid();\n    }\n    translate(translation) {\n        this.x = this.x + translation.x;\n        this.y = this.y + translation.y;\n    }\n    consolidate() {\n        // Esta dependencia con matrix creo que se puede eliminar\n        this.matrix.at(this.x, this.y).set(this.color);\n    }\n    toString() {\n        return `(${this.x},${this.y})`;\n    }\n    relativeTo(block) {\n        return new $71381c9973ee9809$export$9b781de7bf37bf48(this.x - block.x, this.y - block.y);\n    }\n    takeSnapshot() {\n        this.snapshot = [\n            this.x,\n            this.y\n        ];\n    }\n    isValid() {\n        const isValidX = this.x >= (0, $826109a56306c1ec$export$a1dcec72f4af3b71) && this.x < (0, $826109a56306c1ec$export$c50f500af9a45ebe);\n        const isValidY = this.y >= (0, $826109a56306c1ec$export$e08d11f3e69a4ce1) && this.y < (0, $826109a56306c1ec$export$fe84d70d943d614);\n        if (!isValidX || !isValidY) return false;\n        const cell = this.matrix.at(this.x, this.y).get();\n        const isCellEmpty = cell === (0, $826109a56306c1ec$export$c21b640bfee1f50e);\n        return isCellEmpty;\n    }\n}\nclass $71381c9973ee9809$export$9b781de7bf37bf48 {\n    constructor(x, y){\n        this.x = x;\n        this.y = y;\n    }\n    *[Symbol.iterator]() {\n        yield this.x;\n        yield this.y;\n    }\n    toString() {\n        return `${String(this.x)}${String(this.y)}`;\n    }\n}\n\n\n\nclass $5e4137f21f7172b2$export$2e2bcd8739ae039 {\n    #isRotating;\n    #isPaused;\n    #next;\n    constructor(mainScreen, pieceBuilder){\n        this.mainScreen = mainScreen;\n        this.pieceBuilder = pieceBuilder;\n        this.iteration = 0;\n        this.isOver = false;\n        this.#isRotating = false;\n        this.#isPaused = false;\n        this.active = this.pieceBuilder.getRandom(4, 0);\n        this.#next = this.pieceBuilder.getRandom(0, 0);\n        const image = this.active.getImage();\n        this.mainScreen.drawNext(this.#next.getImage());\n    }\n    wannaLeft() {\n        this.move = (0, $826109a56306c1ec$export$346f08c1f0d0fe41).LEFT;\n    }\n    wannaRight() {\n        this.move = (0, $826109a56306c1ec$export$346f08c1f0d0fe41).RIGHT;\n    }\n    wannaRotate() {\n        this.#isRotating = true;\n    }\n    togglePause() {\n        this.#isPaused = !this.#isPaused;\n    }\n    over() {\n        this.mainScreen.gameOver();\n    }\n    iterate() {\n        if (this.#isPaused) return;\n        this.#moveActive();\n        if (this.#isRotating) {\n            this.active.wannaRotate();\n            this.#isRotating = false;\n        }\n        if (this.#isDownIteration()) this.#consolidateDown();\n        this.#render();\n    }\n    #moveActive() {\n        if (this.move === (0, $826109a56306c1ec$export$346f08c1f0d0fe41).LEFT) this.active.wannaLeft();\n        if (this.move === (0, $826109a56306c1ec$export$346f08c1f0d0fe41).RIGHT) this.active.wannaRight();\n        this.move = (0, $826109a56306c1ec$export$346f08c1f0d0fe41).NONE;\n    }\n    #isDownIteration() {\n        return this.iteration++ % (0, $826109a56306c1ec$export$8a35421d63461a85) === 0;\n    }\n    #consolidateDown() {\n        if (this.active.canDown()) this.active.down();\n        else this.#touchGround();\n    }\n    #touchGround() {\n        this.#swapActive();\n        this.mainScreen.clearLines();\n        this.#checkForGameOver();\n    }\n    #swapActive() {\n        this.active.destroy();\n        this.active = null;\n        this.active = this.#next;\n        this.active.translate(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(4, 0));\n        this.#next = null;\n        this.#next = this.pieceBuilder.getRandom(1, 1);\n        this.mainScreen.drawNext(this.#next.getImage());\n    }\n    #checkForGameOver() {\n        this.isOver = !this.active.canDown();\n    }\n    #render() {\n        this.mainScreen.render(this.active);\n    }\n}\n\n\n\nfunction $f6745ab07405201d$export$4385e60b38654f68(number) {\n    return Math.floor(Math.random() * number);\n}\nfunction $f6745ab07405201d$export$69fd1b70ebae5687(value) {\n    return value === null || value === undefined;\n}\nfunction $f6745ab07405201d$export$5551a2d24ff40153(number) {\n    return (0, $826109a56306c1ec$export$8f45430ccf837300)[number % (0, $826109a56306c1ec$export$8f45430ccf837300).length];\n}\nfunction $f6745ab07405201d$export$7ebe28dad98eea33(number) {\n    return (0, $826109a56306c1ec$export$5a5da632d18030b0)[number % (0, $826109a56306c1ec$export$5a5da632d18030b0).length];\n}\n\n\n\nclass $19b2ac27130d29fb$export$333ee567a5b134c8 {\n    constructor(rotations){\n        this.rotations = rotations;\n    }\n    apply(relativePosition) {\n        const found = this.rotations.find((rotation)=>rotation.from.x === relativePosition.x && rotation.from.y === relativePosition.y);\n        if (!found) console.log(`Rotation not found (${relativePosition.x},${relativePosition.y})`);\n        return found.to;\n    }\n}\nclass $19b2ac27130d29fb$export$9bdec6016cc824e2 {\n    constructor(from, to){\n        this.from = from;\n        this.to = to;\n    }\n}\n\n\n\nclass $7b82192943684a5c$export$2e2bcd8739ae039 {\n    #blocks;\n    #image;\n    constructor(blocks, rotateCenter, rotateTable, image){\n        this.#blocks = blocks.sort((a, b)=>{\n            return b.y - a.y;\n        });\n        this.rotateCenter = rotateCenter;\n        this.rotateTable = rotateTable;\n        this.#image = image;\n    }\n    getBlocks() {\n        return this.#blocks;\n    }\n    wannaLeft() {\n        const translation = new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, 0);\n        this.translate(translation);\n    }\n    wannaRight() {\n        const translation = new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, 0);\n        this.translate(translation);\n    }\n    #canTranslate(translation) {\n        const areValid = this.#blocks.every((b)=>b.canTranslate(translation));\n        return areValid;\n    }\n    translate(translation) {\n        const canMove = this.#canTranslate(translation);\n        if (!canMove) return;\n        for (const block of this.#blocks)block.translate(translation);\n    }\n    wannaRotate() {\n        if (this.canRotate()) this.rotate();\n    }\n    canRotate() {\n        throw new Error('must be implemented');\n    }\n    rotate() {\n        throw new Error('must be implemented');\n    }\n    canDown() {\n        const translation = new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 1);\n        return this.#canTranslate(translation);\n    }\n    down() {\n        const translation = new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 1);\n        this.translate(translation);\n    }\n    destroy() {\n        for (const block of this.#blocks)block.consolidate();\n        for (let block of this.#blocks)block = null;\n    }\n    getImage() {\n        return this.#image;\n    }\n    toString() {\n        return this.#blocks.map((b)=>b.toString());\n    }\n}\n\n\nclass $30a34b87eeb39a6d$export$2e2bcd8739ae039 extends (0, $7b82192943684a5c$export$2e2bcd8739ae039) {\n    constructor(blocks, rotateCenter, rotateTable, image){\n        super(blocks, rotateCenter, rotateTable, image);\n    }\n    canRotate() {\n        if (!this.rotateTable) return false;\n        const areValid = this.getBlocks().reduce((result, block)=>{\n            const relativePosition = block.relativeTo(this.rotateCenter);\n            const translation = this.rotateTable.apply(relativePosition);\n            return result && block.canTranslate(translation);\n        }, true);\n        return areValid;\n    }\n    rotate() {\n        for (const block of this.getBlocks()){\n            const relativePosition = block.relativeTo(this.rotateCenter);\n            const translation = this.rotateTable.apply(relativePosition);\n            block.translate(translation);\n        }\n    }\n}\n\n\n\nclass $cd64a5b64ae2a5c1$export$2e2bcd8739ae039 extends (0, $7b82192943684a5c$export$2e2bcd8739ae039) {\n    constructor(blocks, rotateCenter, rotateTable, reverseRotateTable, image){\n        super(blocks, rotateCenter, rotateTable, image);\n        this.isInverted = false;\n        this.reverseRotateTable = reverseRotateTable;\n    }\n    canRotate() {\n        if (!this.rotateTable) return false;\n        const table = this.isInverted ? this.reverseRotateTable : this.rotateTable;\n        const areValid = this.getBlocks().reduce((result, block)=>{\n            const relativePosition = block.relativeTo(this.rotateCenter);\n            const translation = table.apply(relativePosition);\n            return result && block.canTranslate(translation);\n        }, true);\n        return areValid;\n    }\n    rotate() {\n        const table = this.isInverted ? this.reverseRotateTable : this.rotateTable;\n        for (const block of this.getBlocks()){\n            const relativePosition = block.relativeTo(this.rotateCenter);\n            const translation = table.apply(relativePosition);\n            block.translate(translation);\n        }\n        this.isInverted = !this.isInverted;\n    }\n}\n\n\n\n\n\n\n\n\nvar $8542884b3549ad0a$exports = {};\n$8542884b3549ad0a$exports = $parcel$resolve(\"1KxUL\");\n\n\nvar $e634eb65e8a44c02$exports = {};\n$e634eb65e8a44c02$exports = $parcel$resolve(\"auyvD\");\n\n\nvar $4c3c8973a012bfb8$exports = {};\n$4c3c8973a012bfb8$exports = $parcel$resolve(\"kehWT\");\n\n\nvar $856c0600a046b41e$exports = {};\n$856c0600a046b41e$exports = $parcel$resolve(\"jQriX\");\n\n\nvar $6b4409ec7e608f68$exports = {};\n$6b4409ec7e608f68$exports = $parcel$resolve(\"hic7r\");\n\n\nvar $43b3e0297a7f4e32$exports = {};\n$43b3e0297a7f4e32$exports = $parcel$resolve(\"hotXP\");\n\n\nvar $cd961d065f7b098a$exports = {};\n$cd961d065f7b098a$exports = $parcel$resolve(\"8mJIW\");\n\n\nclass $fd867b38197fd079$export$2e2bcd8739ae039 {\n    constructor(matrix){\n        this.matrix = matrix;\n    }\n    getRandom(x, y) {\n        const map = [\n            this.buildSquare,\n            this.buildT,\n            this.buildSeven,\n            this.buildL,\n            this.buildZ,\n            this.buildS,\n            this.buildStick\n        ];\n        const index = (0, $f6745ab07405201d$export$4385e60b38654f68)(map.length);\n        const action = map[index].bind(this);\n        const piece = action(x, y);\n        return piece;\n    }\n    buildSquare(x, y) {\n        const randomColor = 1;\n        const b1 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 0, y + 0, randomColor, this.matrix);\n        const b2 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 1, y + 0, randomColor, this.matrix);\n        const b3 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 0, y + 1, randomColor, this.matrix);\n        const b4 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 1, y + 1, randomColor, this.matrix);\n        const imageUrl = new URL($8542884b3549ad0a$exports).href;\n        const piece = new (0, $30a34b87eeb39a6d$export$2e2bcd8739ae039)([\n            b1,\n            b2,\n            b3,\n            b4\n        ], null, null, imageUrl);\n        return piece;\n    }\n    buildT(x, y) {\n        const randomColor = 2;\n        const b1 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 1, y + 0, randomColor, this.matrix);\n        const b2 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 1, y + 1, randomColor, this.matrix);\n        const b3 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 1, y + 2, randomColor, this.matrix);\n        const b4 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 0, y + 1, randomColor, this.matrix);\n        const rotateTable = new (0, $19b2ac27130d29fb$export$333ee567a5b134c8)([\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, -1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, 1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, -1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, -1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, 1))\n        ]);\n        const imageUrl = new URL($e634eb65e8a44c02$exports).href;\n        const piece = new (0, $30a34b87eeb39a6d$export$2e2bcd8739ae039)([\n            b1,\n            b2,\n            b3,\n            b4\n        ], b2, rotateTable, imageUrl);\n        return piece;\n    }\n    buildSeven(x, y) {\n        const randomColor = 3;\n        const b1 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 0, y + 0, randomColor, this.matrix);\n        const b2 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 0, y + 1, randomColor, this.matrix);\n        const b3 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 0, y + 2, randomColor, this.matrix);\n        const b4 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 1, y + 0, randomColor, this.matrix);\n        const rotateTable = new (0, $19b2ac27130d29fb$export$333ee567a5b134c8)([\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, -1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, 1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, -1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, -1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, 1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, -1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 2)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, 1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-2, 0)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, 1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, -2)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, -1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(2, 0))\n        ]);\n        const imageUrl = new URL($4c3c8973a012bfb8$exports).href;\n        const piece = new (0, $30a34b87eeb39a6d$export$2e2bcd8739ae039)([\n            b1,\n            b2,\n            b3,\n            b4\n        ], b2, rotateTable, imageUrl);\n        return piece;\n    }\n    buildL(x, y) {\n        const randomColor = 4;\n        const b1 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 1, y + 0, randomColor, this.matrix);\n        const b2 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 1, y + 1, randomColor, this.matrix);\n        const b3 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 1, y + 2, randomColor, this.matrix);\n        const b4 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 0, y + 0, randomColor, this.matrix);\n        const rotateTable = new (0, $19b2ac27130d29fb$export$333ee567a5b134c8)([\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, -1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, 1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, -1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, -1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, 1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, -1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 2)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, 1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-2, 0)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, 1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, -2)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, -1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(2, 0))\n        ]);\n        const imageUrl = new URL($856c0600a046b41e$exports).href;\n        const piece = new (0, $30a34b87eeb39a6d$export$2e2bcd8739ae039)([\n            b1,\n            b2,\n            b3,\n            b4\n        ], b2, rotateTable, imageUrl);\n        return piece;\n    }\n    buildStick(x, y) {\n        const randomColor = 5;\n        const b1 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 0, y + 0, randomColor, this.matrix);\n        const b2 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 0, y + 1, randomColor, this.matrix);\n        const b3 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 0, y + 2, randomColor, this.matrix);\n        const b4 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 0, y + 3, randomColor, this.matrix);\n        const rotateTable = new (0, $19b2ac27130d29fb$export$333ee567a5b134c8)([\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, -1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, 1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, -1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 2), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(2, -2))\n        ]);\n        const inverseRotateTable = new (0, $19b2ac27130d29fb$export$333ee567a5b134c8)([\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, -1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, 1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(2, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-2, 2))\n        ]);\n        const imageUrl = new URL($6b4409ec7e608f68$exports).href;\n        const piece = new (0, $cd64a5b64ae2a5c1$export$2e2bcd8739ae039)([\n            b1,\n            b2,\n            b3,\n            b4\n        ], b2, rotateTable, inverseRotateTable, imageUrl);\n        return piece;\n    }\n    buildZ(x, y) {\n        const randomColor = 6;\n        const b1 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x - 1, y + 0, randomColor, this.matrix);\n        const b2 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 0, y + 0, randomColor, this.matrix);\n        const b3 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 0, y + 1, randomColor, this.matrix);\n        const b4 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 1, y + 1, randomColor, this.matrix);\n        const rotateTable = new (0, $19b2ac27130d29fb$export$333ee567a5b134c8)([\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, -1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(2, 0)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, -1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, 1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, 1))\n        ]);\n        const inverseRotateTable = new (0, $19b2ac27130d29fb$export$333ee567a5b134c8)([\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, -1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-2, 0)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, -1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, -1))\n        ]);\n        const imageUrl = new URL($43b3e0297a7f4e32$exports).href;\n        const piece = new (0, $cd64a5b64ae2a5c1$export$2e2bcd8739ae039)([\n            b1,\n            b2,\n            b3,\n            b4\n        ], b3, rotateTable, inverseRotateTable, imageUrl);\n        return piece;\n    }\n    buildS(x, y) {\n        const randomColor = 7;\n        const b1 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 1, y + 0, randomColor, this.matrix);\n        const b2 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 0, y + 0, randomColor, this.matrix);\n        const b3 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x + 0, y + 1, randomColor, this.matrix);\n        const b4 = new (0, $71381c9973ee9809$export$2e2bcd8739ae039)(x - 1, y + 1, randomColor, this.matrix);\n        const rotateTable = new (0, $19b2ac27130d29fb$export$333ee567a5b134c8)([\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, -1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-2, 0)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, -1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, 1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, 1))\n        ]);\n        const inverseRotateTable = new (0, $19b2ac27130d29fb$export$333ee567a5b134c8)([\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 0)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, -1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(2, 0)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, 0), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(1, -1)),\n            new (0, $19b2ac27130d29fb$export$9bdec6016cc824e2)(new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(0, 1), new (0, $71381c9973ee9809$export$9b781de7bf37bf48)(-1, -1))\n        ]);\n        const imageUrl = new URL($cd961d065f7b098a$exports).href;\n        const piece = new (0, $cd64a5b64ae2a5c1$export$2e2bcd8739ae039)([\n            b1,\n            b2,\n            b3,\n            b4\n        ], b3, rotateTable, inverseRotateTable, imageUrl);\n        return piece;\n    }\n}\n\n\n\n\nclass $12a8b3360e84b0a9$export$2e2bcd8739ae039 {\n    constructor(columns, rows){\n        this.columns = columns;\n        this.rows = rows;\n        this.matrix = Array.from({\n            length: columns\n        }, ()=>Array(rows).fill(0));\n    }\n    getColumns() {\n        return this.columns;\n    }\n    getRows() {\n        return this.rows;\n    }\n    at(x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    }\n    get() {\n        this.#guard();\n        return this.matrix[this.x][this.y];\n    }\n    set(value) {\n        this.#guard();\n        this.matrix[this.x][this.y] = value;\n    }\n    #guard() {\n        if ((0, $f6745ab07405201d$export$69fd1b70ebae5687)(this.x) || (0, $f6745ab07405201d$export$69fd1b70ebae5687)(this.y)) throw new Error(`Coord (x,y) must be set but are (${this.x},${this.y})`);\n    }\n    clearLines() {\n        const lines = this.#findLines();\n        for (const line of lines)this.#clearSingleLine(line);\n    }\n    #findLines() {\n        const lines = [];\n        for(let i = 0; i < this.rows; i++){\n            let hasLine = true;\n            for(let j = 0; j < this.columns && hasLine; j++)hasLine = this.matrix[j][i] > (0, $826109a56306c1ec$export$6c844c64a5efe1ee) && hasLine;\n            if (hasLine) lines.push(i);\n        }\n        return lines;\n    }\n    #clearSingleLine(line) {\n        for(let i = line; i > 0; i--)for(let j = 0; j < this.columns; j++){\n            const color = this.matrix[j][i - 1];\n            this.matrix[j][i] = color;\n        }\n    }\n}\n\n\n\n\nclass $46606004cd89cb6b$export$2e2bcd8739ae039 {\n    constructor(canvas){\n        this.canvas = canvas;\n    }\n    matrix(matrix) {\n        for(let i = 0; i < matrix.getColumns(); i++)for(let j = 0; j < matrix.getRows(); j++){\n            const color = matrix.at(i, j).get();\n            this.cell(i, j, color);\n        }\n    }\n    piece(piece) {\n        const blocks = piece.getBlocks();\n        for (const block of blocks){\n            const [x, y] = block.getPosition();\n            const color = block.getColor();\n            this.cell(x, y, color);\n        }\n    }\n    cell(x, y, color) {\n        if (color === 0) return;\n        const posX = x * 40;\n        const posY = y * 40;\n        this.canvas.fillStyle = (0, $f6745ab07405201d$export$5551a2d24ff40153)(color);\n        this.canvas.fillRect(posX, posY, (0, $826109a56306c1ec$export$b2e3d6d444266a5c), (0, $826109a56306c1ec$export$b2e3d6d444266a5c));\n        this.canvas.strokeStyle = (0, $f6745ab07405201d$export$7ebe28dad98eea33)(color);\n        this.canvas.strokeRect(posX, posY, (0, $826109a56306c1ec$export$b2e3d6d444266a5c), (0, $826109a56306c1ec$export$b2e3d6d444266a5c));\n    }\n    clear() {\n        this.canvas.fillStyle = \"white\";\n        this.canvas.fillRect(0, 0, (0, $826109a56306c1ec$export$6e1c5706acfd8e4a) * (0, $826109a56306c1ec$export$b2e3d6d444266a5c), (0, $826109a56306c1ec$export$9ecce7f637e2cef2) * (0, $826109a56306c1ec$export$b2e3d6d444266a5c));\n    }\n    gameOver() {\n        this.canvas.font = \"48px roboto\";\n        this.canvas.fillStyle = \"#000000\";\n        this.canvas.fillText(\"Game Over!\", 85, 376);\n    }\n}\n\n\nclass $04caa57ff199fdc3$export$2e2bcd8739ae039 {\n    #matrix;\n    #drawer;\n    #nextContainer;\n    constructor(matrix, drawer, nextContainerId){\n        this.#matrix = matrix;\n        this.#drawer = drawer;\n        this.#nextContainer = document.getElementById(nextContainerId);\n    }\n    render(piece) {\n        this.#drawer.clear();\n        this.#drawer.matrix(this.#matrix);\n        this.#drawer.piece(piece);\n    }\n    clearLines() {\n        this.#matrix.clearLines();\n    }\n    gameOver() {\n        this.#drawer.gameOver();\n    }\n    drawNext(image) {\n        const img = document.createElement(\"img\");\n        img.src = image;\n        this.#nextContainer.innerHTML = \"\";\n        this.#nextContainer.appendChild(img);\n    }\n    static create(canvasId, matrix, nextContainerId) {\n        const canvas = document.getElementById(canvasId);\n        const ctx = canvas.getContext(\"2d\");\n        const drawer = new (0, $46606004cd89cb6b$export$2e2bcd8739ae039)(ctx);\n        return new $04caa57ff199fdc3$export$2e2bcd8739ae039(matrix, drawer, nextContainerId);\n    }\n}\n\n\nlet $99d08c4d6b37c7ca$var$tetris = null;\nlet $99d08c4d6b37c7ca$var$error = null;\nlet $99d08c4d6b37c7ca$var$stopIntervalId = null;\nfunction $99d08c4d6b37c7ca$var$gameStartup() {\n    const matrix = new (0, $12a8b3360e84b0a9$export$2e2bcd8739ae039)((0, $826109a56306c1ec$export$6e1c5706acfd8e4a), (0, $826109a56306c1ec$export$9ecce7f637e2cef2));\n    const mainScreen = (0, $04caa57ff199fdc3$export$2e2bcd8739ae039).create(\"game\", matrix, \"next\");\n    const pieceBuilder = new (0, $fd867b38197fd079$export$2e2bcd8739ae039)(matrix);\n    $99d08c4d6b37c7ca$var$tetris = new (0, $5e4137f21f7172b2$export$2e2bcd8739ae039)(mainScreen, pieceBuilder);\n    $99d08c4d6b37c7ca$var$tetris.iterate();\n    $99d08c4d6b37c7ca$var$stopIntervalId = window.setInterval(()=>{\n        $99d08c4d6b37c7ca$var$gameLoop();\n    }, (0, $826109a56306c1ec$export$cc060c12b7723909));\n}\nfunction $99d08c4d6b37c7ca$var$gameLoop() {\n    try {\n        if (!$99d08c4d6b37c7ca$var$tetris.isOver && !$99d08c4d6b37c7ca$var$error && !$99d08c4d6b37c7ca$var$tetris.paused) $99d08c4d6b37c7ca$var$tetris.iterate();\n        if ($99d08c4d6b37c7ca$var$tetris.isOver) {\n            window.clearInterval($99d08c4d6b37c7ca$var$stopIntervalId);\n            $99d08c4d6b37c7ca$var$tetris.over();\n        }\n    } catch (err) {\n        window.clearInterval($99d08c4d6b37c7ca$var$stopIntervalId);\n        console.error(err);\n    }\n}\nconst $99d08c4d6b37c7ca$var$keyMapping = {\n    \"ArrowLeft\": ()=>$99d08c4d6b37c7ca$var$tetris.wannaLeft(),\n    \"ArrowRight\": ()=>$99d08c4d6b37c7ca$var$tetris.wannaRight(),\n    \"Space\": ()=>$99d08c4d6b37c7ca$var$tetris.wannaRotate(),\n    \"Escape\": ()=>$99d08c4d6b37c7ca$var$tetris.togglePause()\n};\ndocument.addEventListener(\"keyup\", (ev)=>{\n    const { key: key, code: code } = ev;\n    const index = code ?? key;\n    const mappedAction = $99d08c4d6b37c7ca$var$keyMapping[index];\n    if (mappedAction) mappedAction();\n});\nwindow.onload = ()=>$99d08c4d6b37c7ca$var$gameStartup();\n\n})();\n//# sourceMappingURL=tetris.9ce1a602.js.map\n","parcelRequire.extendImportMap({\"8mJIW\":\"s.8adb7d0e.png\",\"auyvD\":\"t.1a22270f.png\",\"jQriX\":\"l.66e5de53.png\",\"hotXP\":\"z.5c6e7042.png\",\"hic7r\":\"stick.29508506.png\",\"kehWT\":\"seven.a36daa0f.png\",\"1KxUL\":\"square.02a09eec.png\"});","import {COLS, ROWS, SPEED} from './constants.js'\nimport Tetris from './tetris.js'\nimport PieceBuilder from './pieceBuilder.js'\nimport Matrix from './matrix.js'\nimport Screen from './screen.js'\n\nlet tetris = null\nlet error = null\nlet stopIntervalId = null\n\nfunction gameStartup() {\n  const matrix = new Matrix(COLS, ROWS)\n  const mainScreen = Screen.create(\"game\", matrix, \"next\")\n  const pieceBuilder = new PieceBuilder(matrix)\n\n  tetris = new Tetris(mainScreen, pieceBuilder)\n  tetris.iterate()\n  stopIntervalId = window.setInterval(() => {\n    gameLoop()\n  }, SPEED)\n}\n\nfunction gameLoop() {\n  try {\n    if (!tetris.isOver && !error && !tetris.paused) {\n      tetris.iterate()\n    }\n\n    if (tetris.isOver){\n      window.clearInterval(stopIntervalId)\n      tetris.over()\n    }\n\n  } catch (err) {\n    window.clearInterval(stopIntervalId)\n    console.error(err)\n  }\n}\n\nconst keyMapping = {\n  \"ArrowLeft\": () => tetris.wannaLeft(),\n  \"ArrowRight\": () => tetris.wannaRight(),\n  \"Space\": () => tetris.wannaRotate(),\n  \"Escape\": () => tetris.togglePause()\n}\n\ndocument.addEventListener(\"keyup\", ev => {\n\n  const {key,code} = ev\n  const index = code ?? key\n\n  const mappedAction = keyMapping[index]\n\n  if (mappedAction) { mappedAction() }\n})\n\nwindow.onload = () => gameStartup()","export const BLOCK_SIZE = 40\nexport const ROWS = 20\nexport const COLS = 10\nexport const DOWN_ITERATIONS = 10\nexport const SPEED = 20\nexport const NO_COLOR = 0\nexport const X_AXIS_LOWER_BOUND = 0\nexport const X_AXIS_HIGHER_BOUND = COLS\nexport const Y_AXIS_LOWER_BOUND = 0\nexport const Y_AXIS_HIGHER_BOUND = ROWS\nexport const EMPTY_CELL = 0\nexport const MOVE = {\n  NONE: 0,\n  LEFT: 1,\n  RIGHT: 2\n}\nexport const colors = [\"#FF6B6B\", \"#FF9F1C\", \"#FFD23F\", \"#17C3B2\", \"#227C9D\", \"#8B5CF6\", \"#E6E6EA\"]\nexport const borders = [\"#C34C4C\", \"#B36D14\", \"#B8962E\", \"#0F8175\", \"#165166\", \"#5A3EAB\", \"#A1A1A5\"]","import { Vector } from './block.js'\nimport {MOVE, DOWN_ITERATIONS} from './constants.js'\n\nexport default class Tetris {\n  #isRotating\n  #isPaused\n  #next\n\n  constructor(mainScreen, pieceBuilder) {\n    this.mainScreen = mainScreen\n    this.pieceBuilder = pieceBuilder\n\n    this.iteration = 0\n    this.isOver = false\n\n    this.#isRotating = false\n    this.#isPaused = false\n\n    this.active = this.pieceBuilder.getRandom(4, 0)\n    this.#next = this.pieceBuilder.getRandom(0, 0)\n\n    const image = this.active.getImage()\n    this.mainScreen.drawNext(this.#next.getImage())\n  }\n\n  wannaLeft() {\n    this.move = MOVE.LEFT\n  }\n\n  wannaRight() {\n    this.move = MOVE.RIGHT\n  }\n\n  wannaRotate() {\n    this.#isRotating = true\n  }\n\n  togglePause() {\n    this.#isPaused = !this.#isPaused\n  }\n\n  over() {\n    this.mainScreen.gameOver()\n  }\n\n  iterate() {\n    if (this.#isPaused) {\n      return\n    }\n    \n    this.#moveActive()\n\n    if (this.#isRotating) {\n      this.active.wannaRotate()\n      this.#isRotating = false\n    }\n\n    if (this.#isDownIteration()) {\n      this.#consolidateDown()\n    }\n\n    this.#render()\n  }\n\n  #moveActive() {\n    if (this.move === MOVE.LEFT) {\n      this.active.wannaLeft()\n    }\n\n    if (this.move === MOVE.RIGHT) {\n      this.active.wannaRight()\n    }\n\n    this.move = MOVE.NONE\n  }\n\n  #isDownIteration() {\n    return this.iteration++ % DOWN_ITERATIONS === 0\n  }\n\n  #consolidateDown() {\n    if (this.active.canDown()) {\n      this.active.down()\n    } else {\n      this.#touchGround()\n    }\n  }\n\n  #touchGround() {\n    this.#swapActive()\n    this.mainScreen.clearLines()\n    this.#checkForGameOver()\n  }\n\n  #swapActive() {\n    this.active.destroy()\n    this.active = null    \n    this.active = this.#next\n    this.active.translate(new Vector(4, 0))\n    this.#next = null\n    this.#next = this.pieceBuilder.getRandom(1, 1)\n    this.mainScreen.drawNext(this.#next.getImage())\n  }\n\n  #checkForGameOver() { \n    this.isOver = !this.active.canDown()\n  }\n\n  #render() {\n    this.mainScreen.render(this.active)    \n  }\n}","import {X_AXIS_LOWER_BOUND, X_AXIS_HIGHER_BOUND, Y_AXIS_LOWER_BOUND, Y_AXIS_HIGHER_BOUND, EMPTY_CELL} from './constants.js'\n\nexport default class Block {\n  constructor(x, y, color, matrix, snapshot) {\n    this.x = x\n    this.y = y\n    this.color = color\n    this.matrix = matrix\n    this.snapshot = snapshot\n  }\n\n  getPosition() {\n    return new Vector(this.x, this.y)\n  }\n\n  getColor() {\n    return this.color\n  }\n\n  canTranslate(translation) {\n    const nextX = this.x + translation.x\n    const nextY = this.y + translation.y\n    \n    const next = new Block(nextX, nextY, this.color, this.matrix, this.snapshot)\n    return next.isValid()\n  }\n\n  translate(translation) {\n    this.x = this.x + translation.x\n    this.y = this.y + translation.y\n  }\n\n  consolidate() {\n    // Esta dependencia con matrix creo que se puede eliminar\n    this.matrix.at(this.x,this.y).set(this.color)\n  }\n\n  toString() {\n    return `(${this.x},${this.y})`\n  }\n\n  relativeTo(block) {\n    return new Vector(\n      this.x - block.x,\n      this.y - block.y \n    )\n  }\n\n  takeSnapshot() {\n    this.snapshot = [this.x, this.y]\n  }\n\n  isValid() {\n    const isValidX = this.x >= X_AXIS_LOWER_BOUND && this.x < X_AXIS_HIGHER_BOUND\n    const isValidY = this.y >= Y_AXIS_LOWER_BOUND && this.y < Y_AXIS_HIGHER_BOUND\n\n    if (!isValidX || ! isValidY)\n      return false\n\n    const cell = this.matrix.at(this.x,this.y).get()\n\n    const isCellEmpty = cell === EMPTY_CELL \n\n    return isCellEmpty\n  }\n}\n\nexport class Vector {\n  constructor(x,y) {\n    this.x = x\n    this.y = y\n  }\n\n  *[Symbol.iterator]() {\n    yield this.x\n    yield this.y\n  }\n\n\n  toString() {\n    return `${String(this.x)}${String(this.y)}`\n  }\n}\n","import {random} from './utils.js'\nimport Block, {Vector} from './block.js'\nimport { RotateTable, Rotation } from './rotateTable.js'\nimport Piece360 from './piece360.js'\nimport Piece180 from './piece180.js'\n\nimport s from './img/s.png'\nimport t from './img/t.png'\nimport l from './img/l.png'\nimport z from './img/z.png'\nimport stick from './img/stick.png'\nimport seven from './img/seven.png'\n\nexport default class PieceBuilder {\n  constructor(matrix) {\n    this.matrix = matrix\n  }\n\n  getRandom(x, y) {\n    const map = [\n      this.buildSquare, \n      this.buildT,\n      this.buildSeven,\n      this.buildL,\n      this.buildZ,\n      this.buildS,\n      this.buildStick\n    ]\n\n    const index = random(map.length)\n\n    const action = map[index].bind(this)\n\n    const piece = action(x, y)\n\n    return piece\n  }\n\n  buildSquare(x,y) {\n\n    const randomColor = 1\n  \n    const b1 = new Block(x+0, y+0, randomColor, this.matrix)\n    const b2 = new Block(x+1, y+0, randomColor, this.matrix)\n    const b3 = new Block(x+0, y+1, randomColor, this.matrix)\n    const b4 = new Block(x+1, y+1, randomColor, this.matrix)\n\n    const imageUrl = new URL('./img/square.png', import.meta.url).href\n\n    const piece = new Piece360([ b1, b2, b3, b4], null, null, imageUrl)\n  \n    return piece\n  }\n  \n  buildT(x, y) {\n    const randomColor = 2\n  \n    const b1 = new Block(x+1, y+0, randomColor, this.matrix)\n    const b2 = new Block(x+1, y+1, randomColor, this.matrix)\n    const b3 = new Block(x+1, y+2, randomColor, this.matrix)\n    const b4 = new Block(x+0, y+1, randomColor, this.matrix)\n  \n    const rotateTable = new RotateTable([\n      new Rotation(new Vector(0,0), new Vector(0,0)),\n      new Rotation(new Vector(-1,0), new Vector(1,-1)),\n      new Rotation(new Vector(1,0), new Vector(-1,1)),\n      new Rotation(new Vector(0,1), new Vector(-1,-1)),    \n      new Rotation(new Vector(0,-1), new Vector(1,1)),\n    ])\n  \n    const imageUrl = new URL('./img/t.png', import.meta.url).href\n\n    const piece = new Piece360([ b1, b2, b3, b4], b2, rotateTable, imageUrl)\n  \n    return piece\n  }\n\n  buildSeven(x, y) {\n    const randomColor = 3\n  \n    const b1 = new Block(x+0, y+0, randomColor, this.matrix)\n    const b2 = new Block(x+0, y+1, randomColor, this.matrix)\n    const b3 = new Block(x+0, y+2, randomColor, this.matrix)\n    const b4 = new Block(x+1, y+0, randomColor, this.matrix)\n  \n    \n    const rotateTable = new RotateTable([\n      new Rotation(new Vector(0,0), new Vector(0,0)),\n      new Rotation(new Vector(-1,0), new Vector(1,-1)),\n      new Rotation(new Vector(1,0), new Vector(-1,1)),\n      new Rotation(new Vector(0,1), new Vector(-1,-1)),    \n      new Rotation(new Vector(0,-1), new Vector(1,1)),\n      new Rotation(new Vector(1,-1), new Vector(0,2)),\n      new Rotation(new Vector(1,1), new Vector(-2,0)),\n      new Rotation(new Vector(-1,1), new Vector(0,-2)),\n      new Rotation(new Vector(-1,-1), new Vector(2,0))\n    ])\n  \n    const imageUrl = new URL('./img/seven.png', import.meta.url).href\n\n    const piece = new Piece360([ b1, b2, b3, b4], b2, rotateTable, imageUrl)\n  \n    return piece\n  }\n\n  buildL(x, y) {\n    const randomColor = 4\n  \n    const b1 = new Block(x+1, y+0, randomColor, this.matrix)\n    const b2 = new Block(x+1, y+1, randomColor, this.matrix)\n    const b3 = new Block(x+1, y+2, randomColor, this.matrix)\n    const b4 = new Block(x+0, y+0, randomColor, this.matrix)\n  \n    \n    const rotateTable = new RotateTable([\n      new Rotation(new Vector(0,0), new Vector(0,0)),\n      new Rotation(new Vector(-1,0), new Vector(1,-1)),\n      new Rotation(new Vector(1,0), new Vector(-1,1)),\n      new Rotation(new Vector(0,1), new Vector(-1,-1)),    \n      new Rotation(new Vector(0,-1), new Vector(1,1)),\n      new Rotation(new Vector(1,-1), new Vector(0,2)),\n      new Rotation(new Vector(1,1), new Vector(-2,0)),\n      new Rotation(new Vector(-1,1), new Vector(0,-2)),\n      new Rotation(new Vector(-1,-1), new Vector(2,0))\n    ])\n  \n    const imageUrl = new URL('./img/l.png', import.meta.url).href\n\n    const piece = new Piece360([ b1, b2, b3, b4], b2, rotateTable, imageUrl)\n  \n    return piece\n  }\n\n  buildStick(x, y) {\n    const randomColor = 5\n  \n    const b1 = new Block(x+0, y+0, randomColor, this.matrix)\n    const b2 = new Block(x+0, y+1, randomColor, this.matrix)\n    const b3 = new Block(x+0, y+2, randomColor, this.matrix)\n    const b4 = new Block(x+0, y+3, randomColor, this.matrix)\n\n\n    const rotateTable = new RotateTable([\n      new Rotation(new Vector(0,0), new Vector(0,0)),\n      new Rotation(new Vector(0,-1), new Vector(-1,1)),\n      new Rotation(new Vector(0,1), new Vector(1,-1)),\n      new Rotation(new Vector(0,2), new Vector(2,-2)),    \n    ])\n\n    const inverseRotateTable = new RotateTable([\n      new Rotation(new Vector(0,0), new Vector(0,0)),\n      new Rotation(new Vector(-1,0), new Vector(1,-1)),\n      new Rotation(new Vector(1,0), new Vector(-1,1)),\n      new Rotation(new Vector(2,0), new Vector(-2,2)),  \n    ])\n\n    const imageUrl = new URL('./img/stick.png', import.meta.url).href\n\n    const piece = new Piece180([ b1, b2, b3, b4], b2, rotateTable, inverseRotateTable, imageUrl)\n\n    return piece\n  }\n\n\n  buildZ(x, y) {\n    const randomColor = 6\n  \n    const b1 = new Block(x-1, y+0, randomColor, this.matrix)\n    const b2 = new Block(x+0, y+0, randomColor, this.matrix)\n    const b3 = new Block(x+0, y+1, randomColor, this.matrix)\n    const b4 = new Block(x+1, y+1, randomColor, this.matrix)\n\n    const rotateTable = new RotateTable([\n      new Rotation(new Vector(0,0), new Vector(0,0)),\n      new Rotation(new Vector(-1,-1), new Vector(2,0)), \n      new Rotation(new Vector(0,-1), new Vector(1,1)), \n      new Rotation(new Vector(1,0), new Vector(-1,1)), \n    ])\n\n    const inverseRotateTable = new RotateTable([\n      new Rotation(new Vector(0,0), new Vector(0,0)),\n      new Rotation(new Vector(1,-1), new Vector(-2,0)), \n      new Rotation(new Vector(1,0), new Vector(-1,-1)), \n      new Rotation(new Vector(0,1), new Vector(1,-1)), \n    ])\n\n    const imageUrl = new URL('./img/z.png', import.meta.url).href\n\n    const piece = new Piece180([ b1, b2, b3, b4], b3, rotateTable, inverseRotateTable, imageUrl)\n    return piece\n  }\n\n\n  buildS(x, y) {\n    const randomColor = 7\n  \n    const b1 = new Block(x+1, y+0, randomColor, this.matrix)\n    const b2 = new Block(x+0, y+0, randomColor, this.matrix)\n    const b3 = new Block(x+0, y+1, randomColor, this.matrix)\n    const b4 = new Block(x-1, y+1, randomColor, this.matrix)\n\n    const rotateTable = new RotateTable([\n      new Rotation(new Vector(0,0), new Vector(0,0)),\n      new Rotation(new Vector(1,-1), new Vector(-2,0)),     \n      new Rotation(new Vector(0,-1), new Vector(-1,1)),\n      new Rotation(new Vector(-1,0), new Vector(1,1)), \n    ])\n\n    const inverseRotateTable = new RotateTable([\n      new Rotation(new Vector(0,0), new Vector(0,0)),    \n      new Rotation(new Vector(-1,-1), new Vector(2,0)), \n      new Rotation(new Vector(-1,0), new Vector(1,-1)),\n      new Rotation(new Vector(0,1), new Vector(-1,-1)), \n    ])\n\n    const imageUrl = new URL('./img/s.png', import.meta.url).href\n\n    const piece = new Piece180([ b1, b2, b3, b4], b3, rotateTable, inverseRotateTable, imageUrl)\n\n    return piece\n  }\n}","import { colors, borders } from './constants.js'\n\nexport function random(number) {\n  return Math.floor(Math.random()*number)\n}\n\nexport function nullish(value){\n  return value === null || value === undefined\n} \n\n\nexport function getColor(number) {\n  return colors[number % colors.length]\n}\n\nexport function getDarkerColors(number) {\n  return borders[number % borders.length]\n}","export class RotateTable {\n  constructor(rotations) {\n    this.rotations = rotations\n  }\n\n  apply(relativePosition) {    \n    const found = this.rotations.find(rotation => \n      rotation.from.x === relativePosition.x &&\n      rotation.from.y === relativePosition.y\n    )\n    if (!found) {\n      console.log(`Rotation not found (${relativePosition.x},${relativePosition.y})`)\n    }\n    return found.to\n  }\n}\n\n\nexport class Rotation {\n  constructor(from, to) {\n    this.from = from\n    this.to = to\n  }\n}","import Piece from \"./piece\"\n\nexport default class Piece360 extends Piece {\n  constructor(blocks, rotateCenter, rotateTable, image) {\n    super(blocks,rotateCenter,rotateTable, image)\n  }\n\n  canRotate() {\n    if (!this.rotateTable) {\n      return false\n    }\n\n    const areValid = this.getBlocks().reduce((result, block) => {\n      const relativePosition = block.relativeTo(this.rotateCenter)\n      const translation = this.rotateTable.apply(relativePosition)\n      return result && block.canTranslate(translation)\n    }, true)\n\n    return areValid\n  }\n\n  rotate() {\n    for (const block of this.getBlocks()) {\n      const relativePosition = block.relativeTo(this.rotateCenter)\n      const translation = this.rotateTable.apply(relativePosition)\n      block.translate(translation)\n    }    \n  }\n}","import { Vector } from \"./block\"\n\nexport default class Piece {\n  #blocks\n  #image\n\n  constructor(blocks, rotateCenter, rotateTable, image) {\n    this.#blocks = blocks.sort((a,b) => {\n      return b.y - a.y\n    })\n\n    this.rotateCenter = rotateCenter\n    this.rotateTable = rotateTable\n    this.#image = image\n  }\n\n  getBlocks() {\n    return this.#blocks\n  }\n\n  wannaLeft() {\n    const translation = new Vector(-1,0)\n    this.translate(translation)\n  }\n\n  wannaRight() {\n    const translation = new Vector(1,0)\n    this.translate(translation)    \n  }\n\n  #canTranslate(translation) {\n    const areValid = this.#blocks.every(b => b.canTranslate(translation))\n    return areValid    \n  }\n\n  translate(translation) {\n    const canMove = this.#canTranslate(translation)\n    \n    if (!canMove) return\n\n    for (const block of this.#blocks) {\n      block.translate(translation)\n    }\n  }\n\n  wannaRotate() {\n    if (this.canRotate()) {      \n      this.rotate()\n    }\n  }\n\n  canRotate() {\n    throw new Error('must be implemented')\n  }\n\n  rotate() {\n    throw new Error('must be implemented')\n  }\n\n  canDown() {\n    const translation = new Vector(0,1)\n    return this.#canTranslate(translation)    \n  }\n\n  down() {\n    const translation = new Vector(0,1)\n    this.translate(translation)\n  }\n\n  destroy() {\n    for (const block of this.#blocks) {\n      block.consolidate()\n    }\n\n    for (let block of this.#blocks) {\n      block = null\n    }\n  }\n\n  getImage() {\n    return this.#image\n  }\n\n  toString() {\n    return this.#blocks.map(b => b.toString())\n  }\n}","import Piece from \"./piece\"\n\nexport default class Piece180 extends Piece {\n  constructor(blocks, rotateCenter, rotateTable, reverseRotateTable, image) {\n    super(blocks, rotateCenter, rotateTable, image)\n    this.isInverted = false\n    this.reverseRotateTable = reverseRotateTable\n  }\n\n  canRotate() {\n    if (!this.rotateTable) {\n      return false\n    }\n\n    const table = this.isInverted ? this.reverseRotateTable : this.rotateTable\n\n    const areValid = this.getBlocks().reduce((result, block) => {\n      const relativePosition = block.relativeTo(this.rotateCenter)\n      const translation = table.apply(relativePosition)\n      return result && block.canTranslate(translation)\n    }, true)\n\n    return areValid\n  }\n\n  rotate() {\n    const table = this.isInverted ? this.reverseRotateTable : this.rotateTable\n\n    for (const block of this.getBlocks()) {\n      const relativePosition = block.relativeTo(this.rotateCenter)\n      const translation = table.apply(relativePosition)\n      block.translate(translation)\n    }\n    \n    this.isInverted = ! this.isInverted\n  }\n}","module.exports = parcelRequire.resolve(\"1KxUL\");","module.exports = parcelRequire.resolve(\"auyvD\");","module.exports = parcelRequire.resolve(\"kehWT\");","module.exports = parcelRequire.resolve(\"jQriX\");","module.exports = parcelRequire.resolve(\"hic7r\");","module.exports = parcelRequire.resolve(\"hotXP\");","module.exports = parcelRequire.resolve(\"8mJIW\");","import { NO_COLOR} from \"./constants\"\nimport { nullish } from \"./utils\"\n\nexport default class Matrix {\n  constructor(columns, rows) {\n    this.columns = columns\n    this.rows = rows\n    this.matrix = Array.from({ length: columns }, () => Array(rows).fill(0))\n  }\n\n  getColumns() {\n    return this.columns\n  }\n\n  getRows() {\n    return this.rows\n  }\n\n  at(x,y) {\n    this.x = x\n    this.y = y\n\n    return this\n  }\n\n  get() {\n    this.#guard()\n    return this.matrix[this.x][this.y]\n  }\n\n  set(value) {\n    this.#guard()\n    this.matrix[this.x][this.y] = value\n  }\n\n  #guard() {\n    if (nullish(this.x) || nullish(this.y)) {\n      throw new Error(`Coord (x,y) must be set but are (${this.x},${this.y})`)\n    }      \n  }\n\n  clearLines() {\n    const lines = this.#findLines()\n\n    for (const line of lines) {\n      this.#clearSingleLine(line)\n    }\n  }\n\n  #findLines() {    \n    const lines = []\n    for (let i=0; i<this.rows;i++) {\n      let hasLine = true\n      for (let j=0; j<this.columns && hasLine;j++) {   \n        hasLine = this.matrix[j][i] > NO_COLOR && hasLine \n      }\n      if (hasLine) {\n        lines.push(i)\n      }\n    }\n\n    return lines\n  }\n\n  #clearSingleLine(line) {\n    for (let i=line; i>0; i--) {\n      for (let j=0; j<this.columns; j++) {\n        const color = this.matrix[j][i-1]\n        this.matrix[j][i]=color\n      }\n    }\n  }\n}","import Drawer from './drawer.js'\n\nexport default class Screen {\n  #matrix\n  #drawer\n  #nextContainer\n\n  constructor(matrix, drawer, nextContainerId) {\n    this.#matrix = matrix\n    this.#drawer = drawer\n    this.#nextContainer = document.getElementById(nextContainerId)\n  }\n\n  render(piece) {\n    this.#drawer.clear()\n    this.#drawer.matrix(this.#matrix)\n    this.#drawer.piece(piece)\n  }\n\n  clearLines() {\n    this.#matrix.clearLines()\n  }\n\n  gameOver() {\n    this.#drawer.gameOver()\n  }\n\n  drawNext(image) {\n    const img = document.createElement(\"img\")\n    img.src = image\n\n    this.#nextContainer.innerHTML = \"\"\n    this.#nextContainer.appendChild(img)\n  }\n\n  static create(canvasId, matrix, nextContainerId) {\n    const canvas = document.getElementById(canvasId)\n    const ctx = canvas.getContext(\"2d\")\n\n    const drawer = new Drawer(ctx)\n    return new Screen(matrix, drawer, nextContainerId)\n  }\n}\n\n","import { BLOCK_SIZE, COLS, ROWS } from './constants.js'\nimport { getColor, getDarkerColors } from './utils.js'\n\nexport default class Drawer {\n  constructor(canvas) {\n    this.canvas = canvas\n  }\n\n  matrix(matrix) {\n    for (let i=0; i<matrix.getColumns(); i++) {\n      for (let j=0; j<matrix.getRows(); j++) {\n        const color = matrix.at(i,j).get()\n        this.cell(i, j, color)\n      }\n    }\n  }\n\n  piece(piece) {\n    const blocks = piece.getBlocks()\n    for (const block of blocks) {\n      const [x,y] = block.getPosition()\n      const color = block.getColor()\n      this.cell(x,y,color)\n    }\n  }\n\n  cell(x, y, color) {\n    if (color === 0) {\n      return\n    }\n    const posX = x * 40\n    const posY = y * 40\n\n    this.canvas.fillStyle = getColor(color)\n    this.canvas.fillRect(posX, posY, BLOCK_SIZE, BLOCK_SIZE)\n    this.canvas.strokeStyle = getDarkerColors(color)\n    this.canvas.strokeRect(posX, posY, BLOCK_SIZE, BLOCK_SIZE)\n  }\n\n  clear() {\n    this.canvas.fillStyle=\"white\"\n    this.canvas.fillRect(0,0, COLS*BLOCK_SIZE, ROWS*BLOCK_SIZE)\n  }\n  \n  gameOver() {\n    this.canvas.font = \"48px roboto\"\n    this.canvas.fillStyle=\"#000000\"\n    this.canvas.fillText(\"Game Over!\", 85, 376)\n  }\n}\n"],"names":["$parcel$resolve","url","parcelRequire","i","$parcel$bundleURL","Error","err","matches","stack","match","$parcel$distDir","URL","toString","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","id","exports","init","module","call","code","register","Object","assign","$826109a56306c1ec$export$8f45430ccf837300","$826109a56306c1ec$export$5a5da632d18030b0","$71381c9973ee9809$export$2e2bcd8739ae039","constructor","x","y","color","matrix","snapshot","getPosition","$71381c9973ee9809$export$9b781de7bf37bf48","getColor","canTranslate","translation","next","isValid","translate","consolidate","at","set","relativeTo","block","takeSnapshot","isValidX","isValidY","cell","get","Symbol","iterator","String","$5e4137f21f7172b2$export$2e2bcd8739ae039","mainScreen","pieceBuilder","iteration","isOver","active","getRandom","getImage","drawNext","wannaLeft","move","wannaRight","wannaRotate","togglePause","over","gameOver","iterate","canDown","down","clearLines","destroy","render","$19b2ac27130d29fb$export$333ee567a5b134c8","rotations","apply","relativePosition","found","find","rotation","from","console","log","to","$19b2ac27130d29fb$export$9bdec6016cc824e2","$7b82192943684a5c$export$2e2bcd8739ae039","blocks","rotateCenter","rotateTable","image","sort","a","b","getBlocks","every","canRotate","rotate","map","$30a34b87eeb39a6d$export$2e2bcd8739ae039","reduce","result","$cd64a5b64ae2a5c1$export$2e2bcd8739ae039","reverseRotateTable","isInverted","table","$8542884b3549ad0a$exports","$e634eb65e8a44c02$exports","$4c3c8973a012bfb8$exports","$856c0600a046b41e$exports","$6b4409ec7e608f68$exports","$43b3e0297a7f4e32$exports","$cd961d065f7b098a$exports","$fd867b38197fd079$export$2e2bcd8739ae039","buildSquare","buildT","buildSeven","buildL","buildZ","buildS","buildStick","index","Math","floor","random","length","action","bind","b1","b2","b3","href","b4","$12a8b3360e84b0a9$export$2e2bcd8739ae039","columns","rows","Array","fill","getColumns","getRows","value","line","lines","hasLine","j","push","$46606004cd89cb6b$export$2e2bcd8739ae039","canvas","piece","posX","posY","fillStyle","number","fillRect","strokeStyle","strokeRect","clear","font","fillText","$04caa57ff199fdc3$export$2e2bcd8739ae039","drawer","nextContainerId","document","getElementById","img","createElement","src","innerHTML","appendChild","create","canvasId","getContext","$99d08c4d6b37c7ca$var$tetris","$99d08c4d6b37c7ca$var$stopIntervalId","$99d08c4d6b37c7ca$var$keyMapping","addEventListener","ev","key","mappedAction","onload","$99d08c4d6b37c7ca$var$gameStartup","setInterval","$99d08c4d6b37c7ca$var$gameLoop","paused","clearInterval","error"],"version":3,"file":"tetris.9ce1a602.js.map"}